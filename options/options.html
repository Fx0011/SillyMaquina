<!DOCTYPE html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<title>Opções - SillyMaquina</title>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
			integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>
		<script src="../content/chart.js"></script>
		<link rel="stylesheet" href="../common/style.css" />
		<link rel="stylesheet" href="options.css" />
	</head>
	<body>
		<div class="page-container">
			<h1><i class="fas fa-cogs logo highlight-gradient"></i> Opções da Extensão</h1>

			<div id="logged-out-view" style="display: none">
				<h2>Acesso Negado</h2>
				<p>Por favor, faça login através do ícone da extensão para acessar as configurações.</p>
			</div>

			<div id="logged-in-content">
				<div class="main-container">
					<aside class="tabs">
						<button class="tab-link active" data-tab="account">
							<i class="fas fa-user-circle"></i> <span class="tab-text">Minha Conta</span>
						</button>
						<button class="tab-link" data-tab="dashboard">
							<i class="fas fa-chart-pie"></i> <span class="tab-text">Dashboard</span>
						</button>
						<button class="tab-link" data-tab="settings">
							<i class="fas fa-sliders-h"></i> <span class="tab-text">Configurações</span>
						</button>
						<button class="tab-link" data-tab="appearance">
							<i class="fas fa-palette"></i> <span class="tab-text">Aparência</span>
						</button>
						<button class="tab-link" data-tab="history">
							<i class="fas fa-history"></i>
							<span class="tab-text">Histórico</span>
						</button>
						<button class="tab-link" data-tab="guide">
							<i class="fas fa-book-open"></i> <span class="tab-text">Guia</span>
						</button>
						<button class="tab-link" data-tab="contact">
							<i class="fas fa-envelope"></i> <span class="tab-text">Contato/Suporte</span>
						</button>
					</aside>

					<main class="tab-content">
						<div id="account" class="tab-pane active">
							<div class="settings-group">
								<h3 class="settings-group-title">
									<i class="fas fa-id-card"></i> Informações da Conta
								</h3>
								<dl class="info-list">
									<dt>ID de Usuário:</dt>
									<dd id="info-userId">Carregando...</dd>
									<dt>Nome:</dt>
									<dd id="info-name">Carregando...</dd>
									<dt>Plano:</dt>
									<dd id="info-plan">Carregando...</dd>
									<dt>Expiração:</dt>
									<dd id="info-plan-expiry">Carregando...</dd>
								</dl>
							</div>

							<div class="settings-group payment-history">
								<h3 class="settings-group-title">
									<i class="fas fa-credit-card"></i> Histórico de Pagamentos
								</h3>
								<table>
									<thead>
										<tr>
											<th>Data</th>
											<th>Plano</th>
											<th>Valor Pago</th>
										</tr>
									</thead>
									<tbody id="payment-history-body"></tbody>
								</table>
							</div>
						</div>

						<div id="dashboard" class="tab-pane">
							<div class="dashboard-section">
								<h3 class="settings-group-title">
									<i class="fas fa-chart-line"></i> Uso de Modelos Hoje
								</h3>
								<div class="chart-container">
									<canvas id="model-usage-chart"></canvas>
								</div>
								<p id="dashboard-message" class="dashboard-message"></p>
							</div>
						</div>

						<div id="settings" class="tab-pane">
							<div id="config-warning-banner">
								<i class="fas fa-info-circle"></i>
								<span>Alguns recursos ainda estão em desenvolvimento e serão liberados em breve.</span>
							</div>

							<div class="settings-group">
								<h3 class="settings-group-title">
									<i class="fas fa-camera-retro"></i> Modo de Captura
								</h3>
								<div class="radio-option" id="capture-selecao-option">
									<input type="radio" id="capture-selecao" name="captureMode" value="selecao" />
									<label for="capture-selecao">Seleção de Área</label>
								</div>
								<div class="radio-option" id="capture-inteira-option">
									<input type="radio" id="capture-inteira" name="captureMode" value="inteira" />
									<label for="capture-inteira">Tela Inteira (Recomendado)</label>
								</div>
								<div class="radio-option" id="capture-fixo-option">
									<input type="radio" id="capture-fixo" name="captureMode" value="fixo" />
									<label for="capture-fixo">Posição Fixa</label>
								</div>
							</div>

							<div class="settings-group">
								<h3 class="settings-group-title">
									<i class="fas fa-desktop"></i> Modo de Exibição da Resposta
								</h3>
								<div class="radio-option">
									<input type="radio" id="display-popup" name="displayMode" value="popup" />
									<label for="display-popup">Popup Pequeno</label>
								</div>
								<div class="radio-option">
									<input type="radio" id="display-titulo" name="displayMode" value="titulo" />
									<label for="display-titulo">Título da Página</label>
								</div>
								<div id="title-revert-group" class="form-group" style="margin-top: 15px; display: none">
									<label for="title-revert-delay"
										>Atraso para reverter título (segundos, 0 para não reverter)</label
									>
									<input type="number" id="title-revert-delay" min="0" value="5" />
								</div>
							</div>

							<div class="settings-group">
								<h3 class="settings-group-title"><i class="fas fa-brain"></i> Configurações de IA</h3>
								<div class="form-group">
									<label for="ai-model-select">Modelo de IA</label>
									<select id="ai-model-select"></select>
									<div
										id="model-usage-info"
										style="font-size: 0.9em; color: var(--text-secondary); margin-top: 8px"
									></div>
								</div>

								<div class="form-group">
									<label>Temperatura da IA</label>
									<div class="slider-group">
										<span>0.1</span>
										<input type="range" id="ai-temperature" min="0.1" max="1.0" step="0.1" />
										<span>1.0</span>
										<strong id="temperature-value">0.4</strong>
									</div>
								</div>
							</div>

							<div class="settings-group">
								<h3 class="settings-group-title"><i class="fas fa-keyboard"></i> Atalho de Captura</h3>
								<div class="form-group">
									<label for="shortcut-input">Combinação de Teclas</label>
									<input
										type="text"
										id="shortcut-input"
										placeholder="Clique aqui e pressione a combinação de teclas"
										readonly
									/>
									<small style="color: var(--text-tertiary); margin-top: 8px; display: block"
										>Use combinações como Alt+X, Ctrl+Shift+C, etc. Clique em "Salvar Configurações"
										para sincronizar com o servidor.</small
									>
								</div>
							</div>

							<div class="settings-group">
								<h3 class="settings-group-title"><i class="fas fa-save"></i> Histórico Local</h3>
								<div class="form-group">
									<label for="history-size-input">Tamanho do Histórico (Nº de capturas salvas)</label>
									<input type="number" id="history-size-input" min="10" max="200" value="50" />
									<small style="color: var(--text-tertiary); margin-top: 8px; display: block"
										>Valor entre 10 e 200. Um número maior pode consumir mais espaço em
										disco.</small
									>
								</div>
							</div>
						</div>

						<div id="appearance" class="tab-pane">
							<div class="settings-group">
								<h3 class="settings-group-title">
									<i class="fas fa-magic"></i> Aparência do Ícone Flutuante
								</h3>
								<div class="form-group">
									<label for="icon-class">Classe do Ícone Font Awesome</label>
									<div style="display: flex; gap: 10px; align-items: center">
										<input
											type="text"
											id="icon-class"
											placeholder="Ex: fas fa-rocket"
											style="flex-grow: 1"
										/>
										<a
											href="https://sillymaquina.vercel.app/icon-picker"
											target="_blank"
											class="btn btn-secondary"
											style="width: auto; flex-shrink: 0"
											title="Abrir seletor de ícones"
										>
											<i class="fas fa-icons"></i>
										</a>
									</div>
								</div>
								<div class="form-group">
									<label>Tamanho do Ícone (px)</label>
									<div class="slider-group">
										<span>30</span>
										<input type="range" id="icon-size" min="30" max="80" step="1" />
										<span>80</span>
										<strong id="icon-size-value">50</strong>
									</div>
								</div>
								<div class="form-group">
									<label>Opacidade do Ícone</label>
									<div class="slider-group">
										<span>0.1</span>
										<input type="range" id="icon-opacity" min="0.1" max="1.0" step="0.1" />
										<span>1.0</span>
										<strong id="icon-opacity-value">1.0</strong>
									</div>
								</div>
								<div class="form-group">
									<label>Opacidade do Popup de Resposta</label>
									<div class="slider-group">
										<span>0.1</span>
										<input type="range" id="popup-opacity" min="0.1" max="1.0" step="0.1" />
										<span>1.0</span>
										<strong id="popup-opacity-value">1.0</strong>
									</div>
								</div>
							</div>
						</div>

						<div id="history" class="tab-pane">
							<h2 style="margin-bottom: 20px">
								<i class="fas fa-history" style="color: var(--accent-primary)"></i> Histórico de
								Capturas
							</h2>
							<div class="history-controls">
								<div class="history-filters">
									<div class="search-wrapper">
										<i class="fas fa-search"></i>
										<input
											type="search"
											id="history-search-input"
											placeholder="Buscar no histórico ou por tags..."
										/>
									</div>
									<label class="history-filter-toggle">
										<input type="checkbox" id="history-favorites-toggle" />
										<i class="far fa-star"></i>
										<span>Apenas Favoritos</span>
									</label>
								</div>
								<button
									id="clear-history-button"
									class="btn btn-danger btn-sm"
									style="width: auto; padding: 10px 15px"
								>
									<i class="fas fa-trash-alt"></i> Limpar Histórico
								</button>
							</div>

							<div id="history-list-container">
								<!-- History items will be dynamically inserted here -->
							</div>
						</div>

						<div id="guide" class="tab-pane">
							<div class="guide-section">
								<h3><i class="fas fa-rocket"></i> Começando</h3>
								<p>
									Bem-vindo ao SillyMaquina! Para começar, clique no ícone flutuante
									<i class="fas fa-robot" style="color: var(--accent-primary)"></i> que aparece no
									canto inferior direito das páginas, ou use seu atalho de teclado (padrão: Alt+X).
								</p>
							</div>

							<div class="guide-section">
								<h3>
									<i class="fas fa-check-circle" style="color: var(--accent-success)"></i> O Que
									Fazer:
								</h3>
								<ul>
									<li>
										<strong>Use Imagens Claras:</strong> Para melhores resultados, capture imagens
										nítidas, com bom contraste e texto legível.
									</li>
									<li>
										<strong>Capture a Questão Inteira:</strong> Certifique-se de que tanto o
										enunciado quanto todas as alternativas da questão estejam dentro da área de
										captura.
									</li>
									<li>
										<strong>Defina seu Atalho:</strong> Na aba "Configurações", você pode definir um
										atalho de teclado personalizado para agilizar suas capturas.
									</li>
									<li>
										<strong>Personalize a Aparência:</strong> Use a aba "Aparência" para mudar o
										ícone flutuante e sua opacidade, deixando a extensão com a sua cara.
									</li>
								</ul>
							</div>

							<div class="guide-section">
								<h3>
									<i class="fas fa-times-circle" style="color: var(--accent-danger)"></i> O Que Não
									Fazer:
								</h3>
								<ul>
									<li>
										<strong>Não Capture Imagens Borradas:</strong> A IA terá dificuldade em ler
										texto que não esteja claro ou que esteja com baixa resolução.
									</li>
									<li>
										<strong>Evite Capturar Apenas a Resposta:</strong> A IA precisa do contexto
										completo da pergunta para funcionar corretamente. Não capture apenas as
										alternativas.
									</li>
									<li>
										<strong>Não Envie Múltiplas Requisições Rápidas:</strong> A extensão possui um
										limite de tempo entre as capturas para garantir o bom funcionamento. Aguarde a
										resposta da captura anterior antes de iniciar uma nova. Lembre-se que alguns
										modelos são de pensamento, ou seja, eles demoram para responder, mas entregam as
										melhores respostas!
									</li>
								</ul>
							</div>
						</div>

						<div id="contact" class="tab-pane">
							<div class="contact-card">
								<h3
									class="settings-group-title"
									style="justify-content: center; border-bottom: none; margin-bottom: 20px"
								>
									<i class="fas fa-envelope-open-text"></i> Contato e Suporte
								</h3>
								<p>
									Encontrou um problema, tem alguma sugestão para melhorar a extensão ou precisa de
									ajuda? Adoraríamos ouvir de você!
								</p>
								<p>
									Envie um e-mail para nossa equipe de suporte. Faremos o nosso melhor para responder
									o mais rápido possível.
								</p>
								<a href="mailto:sillymaquina@gmail.com" class="btn btn-primary contact-email-button">
									<i class="fas fa-paper-plane"></i> Enviar E-mail para sillymaquina@gmail.com
								</a>
							</div>
						</div>
					</main>
				</div>

				<div class="footer-actions">
					<div>
						<button id="save-button" class="btn btn-primary">
							<i class="fas fa-save"></i> Salvar Configurações
						</button>
						<span id="save-status" class="message-area"></span>
					</div>
					<div style="display: flex; gap: 10px">
						<button id="reset-button" class="btn btn-secondary"><i class="fas fa-undo"></i> Resetar</button>
						<button id="logout-button" class="btn btn-danger">
							<i class="fas fa-sign-out-alt"></i> Sair
						</button>
					</div>
				</div>
			</div>
		</div>
		<script src="options.js"></script>
	</body>
</html>
